{"mappings":"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","sources":["src/Details.tsx","src/Carousel.tsx","src/ErrorBoundary.tsx","src/ThemeContext.tsx","node_modules/@parcel/runtime-js/lib/runtime-aed3478b852d403a.js"],"sourcesContent":["import React, { Component, lazy } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Carousel from \"./Carousel\";\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport ThemeContext from \"./ThemeContext\";\r\nimport { PetAPIResponse, Animal,TParams } from \"./APIResponseTypes\";\r\n// import Modal from \"./Modal\";\r\n\r\n// dynamically importing modal using lazy\r\nconst Modal = lazy(() => import(\"./Modal\"));\r\n\r\nclass Details extends Component<{ params: TParams}> {\r\n  // constructor method\r\n  // constructor() {\r\n  //   super();\r\n  // our state object\r\n  state = { \r\n    loading: true, \r\n    showModal: false, \r\n    animal: \"\" as Animal, \r\n    breed: \"\", \r\n    city: \"\", \r\n    state: \"\", \r\n    description:\"\", \r\n    name: \"\", \r\n    images: [] as string[] \r\n  };\r\n  // }\r\n\r\n  async componentDidMount() {\r\n    const res = await fetch(\r\n      `http://pets-v2.dev-apis.com/pets?id=${(this.props.params.id)!.toString()}`\r\n    );\r\n    const json = (await res.json()) as PetAPIResponse;\r\n    // setting new state values\r\n    // json.pets[0] will hold an object with all keys and values.\r\n    this.setState(\r\n      Object.assign(\r\n        {\r\n          loading: false,\r\n        },\r\n        json.pets[0]\r\n      )\r\n    );\r\n  }\r\n  // following method will reverse the showModal state value\r\n  toggleModal = () => {\r\n    this.setState({ showModal: !this.state.showModal });\r\n  };\r\n  // following method is pointing to the external URL.\r\n  adopt = () => (window.location.href = \"http://bit.ly/pet-adopt\");\r\n\r\n  render() {\r\n    if (this.state.loading) {\r\n      return <h2>loading â€¦ </h2>;\r\n    }\r\n    const { animal, breed, city, state, description, name, images, showModal } =\r\n      this.state;\r\n    return (\r\n      <div className=\"details\">\r\n        <Carousel images={images} name={name} />\r\n        <div className=\"text-center px-9\">\r\n          <h1 className=\"text-6xl\">{name}</h1>\r\n          <h2 className=\"text-3xl\">{`${animal} - ${breed} - ${city}, ${state}`}</h2>\r\n          <ThemeContext.Consumer>\r\n            {([theme]) => (\r\n              <button\r\n                onClick={this.toggleModal}\r\n                className=\"btn w-1/6 p-5 rounded-md my-4 text-white hover:text-zinc-300\"\r\n                style={{ backgroundColor: theme }}\r\n              >\r\n                Adopt {name}\r\n              </button>\r\n            )}\r\n          </ThemeContext.Consumer>\r\n          <p className=\"w-1/2 mx-auto text-justify mb-10\">{description}</p>\r\n          {showModal ? (\r\n            <Modal>\r\n              <div className=\"bg-white px-[200px] py-[100px] rounded-lg drop-shadow-2xl\">\r\n                <h1 className=\"text-2xl mb-5\">\r\n                  Would you like to adopt {name} ?\r\n                </h1>\r\n                <div className=\"buttons flex \">\r\n                  <button\r\n                    className=\"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 md:py-4 md:text-lg md:px-10 mr-2\"\r\n                    onClick={this.adopt}\r\n                  >\r\n                    Yes\r\n                  </button>\r\n                  <button\r\n                    className=\"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 md:py-4 md:text-lg md:px-10 ml-2\"\r\n                    onClick={this.toggleModal}\r\n                  >\r\n                    No\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </Modal>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n// higher order component and returning Details component.\r\nconst WrappedDetails = () => {\r\n  // using useparams hook\r\n  const params = useParams<TParams>();\r\n  // adding params prop\r\n  // params is the value\r\n  return (\r\n    <ErrorBoundary>\r\n      <Details params={params} />\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default WrappedDetails;\r\n","import React, { Component, MouseEvent, ReactNode } from \"react\";\r\n\r\ninterface IProps{\r\n  images: string[];\r\n  name: string;\r\n}\r\n\r\nexport default class Carousel extends Component<IProps> {\r\n  state = {\r\n    active: 0,\r\n  };\r\n  // The defaultProps is a React component property that allows you to set default values for the props argument\r\n  static defaultProps = {\r\n    images: [\"http://pets-images.dev-apis.com/pets/none.jpg\"],\r\n    name: \"animal\",\r\n  };\r\n  // arrow function must be used otherwise this will be undefined.\r\n  // In case of arrow function this refers to the surrounding scope\r\n  // As the class is surrounding this method, therefore this will refer\r\n  // to this class.\r\n  handleIndexClick = (event: MouseEvent<HTMLElement>): void => {\r\n    // console.log(+event.target.dataset.index);\r\n\r\n    if(!(event.target instanceof HTMLImageElement)){\r\n      return;\r\n    }\r\n    if(event.target.dataset.index){\r\n      this.setState({\r\n        // event.target.dataset.index will target the data-index value of the image, that was clicked.\r\n        // The data attribute comes back as a string. We want it to be a number, hence the +\r\n        active: +event.target.dataset.index,\r\n      });\r\n    }\r\n\r\n  };\r\n\r\n  render(): ReactNode {\r\n    // destructuring our state.\r\n    const { active } = this.state;\r\n    // destructuring our props that's comming from the parent component.\r\n    // we will be passing down images prop\r\n    // from Details to Carousels component.\r\n    const { images, name } = this.props;\r\n    console.log(this.props);\r\n    return (\r\n      <div className=\"carousel grid grid-cols-1 gap-4 px-9\">\r\n        <img\r\n          data-testid=\"hero\"\r\n          src={images[active]}\r\n          alt={name}\r\n          className=\"w-2/3 h-[400px] object-cover object-center mx-auto rounded border-2 border-black\"\r\n        />\r\n        <div className=\"w-2/3 mx-auto carousel-smaller flex flex-wrap justify-center items-center\">\r\n          {images.map((photo, index) => (\r\n            <img\r\n              data-testid={`thumbnail${index}`}\r\n              src={photo}\r\n              key={photo}\r\n              role=\"presentation\"\r\n              data-index={index}\r\n              onClick={this.handleIndexClick}\r\n              className={\r\n                index === active\r\n                  ? \"active w-1/5 rounded-full p-2 border-2 border-black\"\r\n                  : \"w-1/5 rounded-full p-2 border-2 border-white\"\r\n              }\r\n              alt=\"animal thumbnail\"\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component, ErrorInfo, ReactNode } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nexport default class ErrorBoundary extends Component {\r\n  state = {\r\n    hasError: false,\r\n    redirect: false,\r\n  };\r\n  /**\r\n   * The getDerivedStateFromError() method is invoked if some error occurs during the rendering phase.\r\n   *  It is called during the render phase, so side-effects are not permitted in this method. For side-effects, we use componentDidCatch() instead.\r\n   *\r\n   */\r\n  static getDerivedStateFromError(): {hasError: boolean, redirect: boolean} {\r\n    // Changing the state hasError to true if some error occurs.\r\n    return {\r\n      hasError: true,\r\n      redirect: false,\r\n    };\r\n  }\r\n  // componentDidCatch is also involked during rendering phase.\r\n  // unlike getDerivedStateFromError() side-effects are allowed in this method.\r\n  componentDidCatch(error: Error, info: ErrorInfo): void {\r\n    console.error(\"ErrorBoundery caught an error.\", error, info);\r\n  }\r\n  componentDidUpdate(): void {\r\n    if (this.state.hasError) {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          redirect: true,\r\n        });\r\n      }, 5000);\r\n    }\r\n  }\r\n  render(): ReactNode {\r\n    if (this.state.redirect) {\r\n      return <Navigate to=\"/\" />;\r\n    } else if (this.state.hasError) {\r\n      return (\r\n        <h2>\r\n          There was an error with this listing. <Link to=\"/\">Click here</Link>{\" \"}\r\n          to back to the home page or wait five seconds.\r\n        </h2>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","import React, { createContext } from \"react\";\r\n// creating a new context for our theme in our app.\r\n// createContext is a function that returns an object with two React components in it: a Provider and a Consumer.\r\n// we're actually passing a value and a function like  what useState returns.\r\nconst ThemeContext = createContext<[string, React.Dispatch<React.SetStateAction<string>>]>([\"green\", () => {}]);\r\n\r\nexport default ThemeContext;\r\n","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"kpUWT\"))).then(() => parcelRequire('gfEyd'));"],"names":["Modal","lazy","parcelRequire","Details","Component","async","res","fetch","this","props","params","id","toString","json","setState","Object","assign","loading","pets","render","state","$3Zbho","jsx","animal","breed","city","description","name","images","showModal","jsxs","className","$hwVPp","default","$iqioP","Consumer","theme","onClick","toggleModal","style","backgroundColor","$070f9d1743eaa579$var$Modal","adopt","constructor","args","super","$070f9d1743eaa579$var$_defineProperty","window","location","href","$070f9d1743eaa579$export$2e2bcd8739ae039","useParams","$2Jx8g","$070f9d1743eaa579$var$Details","Carousel","active","console","log","src","alt","map","photo","index","role","handleIndexClick","$1471ccb647d0f92e$var$_defineProperty","event","target","HTMLImageElement","dataset","ErrorBoundary","hasError","componentDidCatch","error","info","setTimeout","redirect","$brOwx","Link","to","children","$1b7ae14963c88793$export$2e2bcd8739ae039","createContext","module","exports","import","resolve","then"],"version":3,"file":"Details.5d20567f.js.map"}